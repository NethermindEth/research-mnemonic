<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mnemonic sharing: reconstruct Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mnemonic sharing
   </div>
   <div id="projectbrief">Share mnemonics using Shamir Secret Sharing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacereconstruct.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">reconstruct Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa98d05d3294020e4694a6bb2a232b741"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereconstruct.html#aa98d05d3294020e4694a6bb2a232b741">get_reconstruction_data</a> (dict)</td></tr>
<tr class="separator:aa98d05d3294020e4694a6bb2a232b741"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5c1ad58562aea3eaa6c88bb58b5b6995"><td class="memItemLeft" align="right" valign="top"><a id="a5c1ad58562aea3eaa6c88bb58b5b6995" name="a5c1ad58562aea3eaa6c88bb58b5b6995"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>parser</b> = argparse.ArgumentParser()</td></tr>
<tr class="separator:a5c1ad58562aea3eaa6c88bb58b5b6995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd6f3a7cd016e7c015c8081f6678557"><td class="memItemLeft" align="right" valign="top"><a id="accd6f3a7cd016e7c015c8081f6678557" name="accd6f3a7cd016e7c015c8081f6678557"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>action</b></td></tr>
<tr class="separator:accd6f3a7cd016e7c015c8081f6678557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2011c80d89847f1cbc8798ee41d89bb5"><td class="memItemLeft" align="right" valign="top"><a id="a2011c80d89847f1cbc8798ee41d89bb5" name="a2011c80d89847f1cbc8798ee41d89bb5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>help</b></td></tr>
<tr class="separator:a2011c80d89847f1cbc8798ee41d89bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd439a2778e20e5c79b7a3b26cee5ece"><td class="memItemLeft" align="right" valign="top"><a id="acd439a2778e20e5c79b7a3b26cee5ece" name="acd439a2778e20e5c79b7a3b26cee5ece"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>args</b> = parser.parse_args()</td></tr>
<tr class="separator:acd439a2778e20e5c79b7a3b26cee5ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bb21254a2011d8974e7b8a5adcd910"><td class="memItemLeft" align="right" valign="top"><a id="a77bb21254a2011d8974e7b8a5adcd910" name="a77bb21254a2011d8974e7b8a5adcd910"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>verbose</b> = args.verbose</td></tr>
<tr class="separator:a77bb21254a2011d8974e7b8a5adcd910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97c3a1afe8ab03de8129ccd60f66bcda"><td class="memItemLeft" align="right" valign="top"><a id="a97c3a1afe8ab03de8129ccd60f66bcda" name="a97c3a1afe8ab03de8129ccd60f66bcda"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>list_of_share_filenames</b> = glob.glob('shares/share*[0-9].json')</td></tr>
<tr class="separator:a97c3a1afe8ab03de8129ccd60f66bcda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ba139d7e8d528f81a754ae6ebb7e5d"><td class="memItemLeft" align="right" valign="top"><a id="ab9ba139d7e8d528f81a754ae6ebb7e5d" name="ab9ba139d7e8d528f81a754ae6ebb7e5d"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>reconstruction_json_path</b> = list_of_share_filenames[0] if verbose else 'shares/reconstruction_data.json'</td></tr>
<tr class="separator:ab9ba139d7e8d528f81a754ae6ebb7e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464f6ac37033d1211397f041f5076d10"><td class="memItemLeft" align="right" valign="top"><a id="a464f6ac37033d1211397f041f5076d10" name="a464f6ac37033d1211397f041f5076d10"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>data</b> = json.load(json_file)</td></tr>
<tr class="separator:a464f6ac37033d1211397f041f5076d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031328733b2de6ff69eb18ae68a96cdb"><td class="memItemLeft" align="right" valign="top"><a id="a031328733b2de6ff69eb18ae68a96cdb" name="a031328733b2de6ff69eb18ae68a96cdb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>total_shares</b></td></tr>
<tr class="separator:a031328733b2de6ff69eb18ae68a96cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd350ee9c505cf4d404e62104541f9f"><td class="memItemLeft" align="right" valign="top"><a id="a7bd350ee9c505cf4d404e62104541f9f" name="a7bd350ee9c505cf4d404e62104541f9f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>threshold</b></td></tr>
<tr class="separator:a7bd350ee9c505cf4d404e62104541f9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b7d22fa7ebdde2716ddbd4acf77131"><td class="memItemLeft" align="right" valign="top"><a id="ab3b7d22fa7ebdde2716ddbd4acf77131" name="ab3b7d22fa7ebdde2716ddbd4acf77131"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>primitive_poly</b></td></tr>
<tr class="separator:ab3b7d22fa7ebdde2716ddbd4acf77131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ef92b5d38b5bc8250da91412d743ea2"><td class="memItemLeft" align="right" valign="top"><a id="a1ef92b5d38b5bc8250da91412d743ea2" name="a1ef92b5d38b5bc8250da91412d743ea2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>word_list</b></td></tr>
<tr class="separator:a1ef92b5d38b5bc8250da91412d743ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b17f69d46eba6b137dab30ede2cdbe"><td class="memItemLeft" align="right" valign="top"><a id="a12b17f69d46eba6b137dab30ede2cdbe" name="a12b17f69d46eba6b137dab30ede2cdbe"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dict_bits</b> = <a class="el" href="namespaceword__coding.html#a61ad28767efb3623c54625c9e00276f7">word_coding.get_dictionary_bits</a>(word_list)</td></tr>
<tr class="separator:a12b17f69d46eba6b137dab30ede2cdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c2378a0254bff8c2a1c33a7112e5c98"><td class="memItemLeft" align="right" valign="top"><a id="a3c2378a0254bff8c2a1c33a7112e5c98" name="a3c2378a0254bff8c2a1c33a7112e5c98"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>num_words</b> = <a class="el" href="namespaceshamir.html#a263d4e85b75242cd1ed3d931c6dc6e9b">shamir.get_polynomial_degree</a>(primitive_poly)//dict_bits</td></tr>
<tr class="separator:a3c2378a0254bff8c2a1c33a7112e5c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db263a21700f3cbfe351b57a85f5af5"><td class="memItemLeft" align="right" valign="top"><a id="a8db263a21700f3cbfe351b57a85f5af5" name="a8db263a21700f3cbfe351b57a85f5af5"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>x_id</b> = []</td></tr>
<tr class="separator:a8db263a21700f3cbfe351b57a85f5af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954cf48bf1acaacaeb55884b6a9308ed"><td class="memItemLeft" align="right" valign="top"><a id="a954cf48bf1acaacaeb55884b6a9308ed" name="a954cf48bf1acaacaeb55884b6a9308ed"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>y_shares</b> = []</td></tr>
<tr class="separator:a954cf48bf1acaacaeb55884b6a9308ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb9d2223b80a3b292a82fe29775c132"><td class="memItemLeft" align="right" valign="top"><a id="a7fb9d2223b80a3b292a82fe29775c132" name="a7fb9d2223b80a3b292a82fe29775c132"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>json_share</b> = json.load(json_file)</td></tr>
<tr class="separator:a7fb9d2223b80a3b292a82fe29775c132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b670d4e508cdd332eb0508455a3e1f1"><td class="memItemLeft" align="right" valign="top"><a id="a8b670d4e508cdd332eb0508455a3e1f1" name="a8b670d4e508cdd332eb0508455a3e1f1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>binary_share</b> = <a class="el" href="namespaceword__coding.html#a90df4933f53f5874a926f5328b4335ce">word_coding.encode_words</a>(word_list, json_share['share'])</td></tr>
<tr class="separator:a8b670d4e508cdd332eb0508455a3e1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ead1e6c7bcdb8be8ed29ef8626254a9"><td class="memItemLeft" align="right" valign="top"><a id="a7ead1e6c7bcdb8be8ed29ef8626254a9" name="a7ead1e6c7bcdb8be8ed29ef8626254a9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>reconstructed_secret</b> = <a class="el" href="namespaceshamir.html#a563499ba0bed3c0210657a0dbbebbd85">shamir.secret_reconstruction</a>(x_id, y_shares, primitive_poly)</td></tr>
<tr class="separator:a7ead1e6c7bcdb8be8ed29ef8626254a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2e239a681f33d1713016e4df445a6d3"><td class="memItemLeft" align="right" valign="top"><a id="ab2e239a681f33d1713016e4df445a6d3" name="ab2e239a681f33d1713016e4df445a6d3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>seed_phrase</b> = <a class="el" href="namespaceword__coding.html#a01a5805472b9cc0228944b902ff9ad65">word_coding.decode_words</a>(word_list, format(reconstructed_secret, 'b').zfill(dict_bits*num_words))</td></tr>
<tr class="separator:ab2e239a681f33d1713016e4df445a6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Take JSON shares generated by create_shares.py and reconstruct the original secret phrase.


Requisites 
----------
(To read about the format needed by the following files, read the documentation in create_shares.py)

1) At least t JSON shares, in the format generated by create_shares.py, must be present in the
folder /shares. Here, t represents the threshold used when creating the shares

2) Unless the JSON shares are verbose, the file reconstruction_data.json, containing the public 
reconstruction data, should also be present in the folder. This file is not needed if the shares are
verbose, in which case one can run this script with the -v flag.


Execution and inputs
--------------------
This script should be called from the command line. It has only one optional flag

-v, --verbose: If this flag is used, the public reconstruction data is taken directly from the JSON
shares. The script verifies the consistency of this data among all the shares, throwing an exception
if this data is not consistent.


Outputs
-------
The file secret_reconstructed.txt is generated in the script's folder. The reconstructed secret is
also printed on the command line.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="aa98d05d3294020e4694a6bb2a232b741" name="aa98d05d3294020e4694a6bb2a232b741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa98d05d3294020e4694a6bb2a232b741">&#9670;&nbsp;</a></span>get_reconstruction_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def reconstruct.get_reconstruction_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dict</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gets the public reconstruction data from a JSON file, in the format needed by shamir.py</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacereconstruct.html">reconstruct</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
